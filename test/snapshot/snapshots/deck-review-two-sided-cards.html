<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MTG Game - Jaceteous League</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Rampart+One&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/styles.css" />
<link rel="stylesheet" href="/game.css" />
<script>
// Generate browserTabId first, before tracing initialization
const SESSION_STORAGE_KEY = "browserTabId";
let browserTabId = sessionStorage.getItem(SESSION_STORAGE_KEY);
if (!browserTabId) {
browserTabId = crypto.randomUUID();
sessionStorage.setItem(SESSION_STORAGE_KEY, browserTabId);
}
window.browserTabId = browserTabId;
</script>
<script src="/hny.js"></script>
<script>
Hny.initializeTracing({
apiKey: "TEST_API_KEY",
serviceName: "mtg-deck-shuffler-web",
debug: false,
provideOneLinkToHoneycomb: true,
resourceAttributes: {
"game.browser_tab_id": window.browserTabId
}
});
</script>
<script src="/htmx.js"></script>
<script>
// Configure HTMX to include browserTabId in all requests
document.addEventListener("htmx:configRequest", function (event) {
event.detail.headers["X-Browser-Tab-Id"] = window.browserTabId;
});
// Configure HTMX to swap on 409 Conflict responses
htmx.config.responseHandling = [
{code: "204", swap: false},  // No Content
{code: "2..", swap: true},   // All other 2xx
{code: "409", swap: true},   // Conflict (stale state)
];
</script>
<script src="/game.js"></script>
</head>
<body>
<div class="page-with-title-container">
<div class="title-container">
<h1 class="homepage-title">MTG Deck Shuffler</h1>
</div>
<div id="deck-review-container" class="deck-review-container">
<div id="command-zone">
<div class="cool-command-zone-surround ">
<div class="game-title"><p>
<span class="game-name">Jaceteous League</span> <a href="https://archidekt.com/decks/75009" target="_blank">â†—</a>
</p></div>
<div class="multiple-cards">
<div id="card-3-container" class="card-container clickable-card "
hx-get="/card-modal/789/3?expected-version=0"
hx-target="#card-modal-container"
hx-swap="innerHTML"
style="cursor: pointer;">
<div id="card-3-outer-flip-container-with-button" class="flip-container-with-button">
<div id="card-3-outer-flip-container" class=" flip-container-outer">
<div id="card-3-inner-flip-container" class="flip-container-inner">
<img id="card-3-back-face" src="https://cards.scryfall.io/normal/back/f/6/f6cd7465-9dd0-473c-ac5e-dd9e2f22f5f6.jpg" alt="Esika, God of the Tree // The Prismatic Bridge (back face)" class="mtg-card-image two-sided-back" />
<img id="card-3-front-face" src="https://cards.scryfall.io/normal/front/f/6/f6cd7465-9dd0-473c-ac5e-dd9e2f22f5f6.jpg" alt="Esika, God of the Tree // The Prismatic Bridge" class="mtg-card-image two-sided-front" title="Esika, God of the Tree // The Prismatic Bridge" />
</div>
</div>
<button class="flip-button" id="card-3-flip-button" hx-post="/flip-card/789/3" hx-vals='{"expected-version": 0}' hx-swap="outerHTML" hx-target="#card-3-outer-flip-container-with-button" onclick="event.stopPropagation()">Flip</button>
</div>
</div>
</div>
</div>
</div>
<div id="start-game-buttons" class="deck-actions">
<form method="post" action="/start-game" class="inline-form">
<input type="hidden" name="game-id" value="789" />
<input type="hidden" name="expected-version" value="0" />
<button type="submit" class="start-game-button">Shuffle Up</button>
</form>
<form method="post" action="/end-game" class="inline-form">
<input type="hidden" name="game-id" value="789" />
<button type="submit" class="back-button">Choose Another Deck</button>
</form>
</div>
<div id="library-list" data-testid="library-section">
<h4 class="cute-header">Library</h4>
<div class="cute-header-subtitle">
7 cards in library, ordered by position
</div>
<ul class="library-search-list">
<li class="library-card-item">
<span class="card-name-link clickable-card-name"
hx-get="/card-modal/789/0"
hx-target="#card-modal-container"
hx-swap="innerHTML"
style="cursor: pointer;">Carth the Lion</span>
</li><li class="library-card-item">
<span class="card-name-link clickable-card-name"
hx-get="/card-modal/789/1"
hx-target="#card-modal-container"
hx-swap="innerHTML"
style="cursor: pointer;">Dakkon, Shadow Slayer</span>
</li><li class="library-card-item">
<span class="card-name-link clickable-card-name"
hx-get="/card-modal/789/2"
hx-target="#card-modal-container"
hx-swap="innerHTML"
style="cursor: pointer;">Damnation</span>
</li><li class="library-card-item">
<span class="card-name-link clickable-card-name"
hx-get="/card-modal/789/4"
hx-target="#card-modal-container"
hx-swap="innerHTML"
style="cursor: pointer;">Homeward Path</span>
</li><li class="library-card-item">
<span class="card-name-link clickable-card-name"
hx-get="/card-modal/789/5"
hx-target="#card-modal-container"
hx-swap="innerHTML"
style="cursor: pointer;">Lae'zel, Vlaakith's Champion</span>
</li><li class="library-card-item">
<span class="card-name-link clickable-card-name"
hx-get="/card-modal/789/6"
hx-target="#card-modal-container"
hx-swap="innerHTML"
style="cursor: pointer;">Miku, the Renowned</span>
</li><li class="library-card-item">
<span class="card-name-link clickable-card-name"
hx-get="/card-modal/789/7"
hx-target="#card-modal-container"
hx-swap="innerHTML"
style="cursor: pointer;">Nicol Bolas, the Ravager // Nicol Bolas, the Arisen</span>
</li>
</ul>
</div>
</div>
<div id="modal-container"></div>
<div id="card-modal-container"></div>
</div>
<footer>
<div class="debug-section"
id="debug-section"
hx-get="/debug-section/789"
hx-trigger="game-state-updated from:body"
hx-swap="innerHTML">
<p class="game-id">Game ID: 789 | <button class="debug-button"
hx-get="/debug-state/789"
hx-target="#modal-container"
hx-swap="innerHTML"
class="debug-button">State</button>: 0</p>
<p class="browser-tab-id">Tab ID: <span id="browser-tab-id-display">loading...</span></p>
<script>
// Display the browser tab ID once available
if (window.browserTabId) {
document.getElementById('browser-tab-id-display').textContent = window.browserTabId.slice(0, 8);
document.getElementById('browser-tab-id-display').title = window.browserTabId;
}
</script>
</div>
<a href="https://github.com/jessitron/mtg-deck-shuffler" target="_blank"><img src="/github-mark.svg" height=50px alt="GitHub" class="github-logo"></a></p>
</footer>
</body>
</html>