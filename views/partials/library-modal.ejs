<%# 
  Library Search Modal - Unified template for both /prepare and /game pages
  
  Parameters:
  - cards: Array of card objects with { name, gameCardIndex }
  - cardModalUrlTemplate: URL template with {cardIndex} placeholder (e.g., "/card-modal/123/{cardIndex}?expected-version=5")
%>
<div class="modal-overlay"
     hx-get="/close-modal"
     hx-target="#modal-container"
     hx-swap="innerHTML"
     hx-trigger="click[target==this], keyup[key=='Escape'] from:body"
     tabindex="0">
  <div class="modal-dialog">
    <div class="modal-header">
      <h2 class="modal-title">Library Contents</h2>
      <button class="modal-close"
              hx-get="/close-modal"
              hx-target="#modal-container"
              hx-swap="innerHTML">&times;</button>
    </div>
    <div class="modal-body">
      <p class="modal-subtitle">
        <%= cards.length %> cards
      </p>
      <ul class="library-search-list">
        <% cards.forEach(card => { %>
          <li class="library-card-item">
            <span class="card-name-link clickable-card-name"
                  hx-get="<%= cardModalUrlTemplate.replace('{cardIndex}', card.gameCardIndex) %>"
                  hx-target="#card-modal-container"
                  hx-swap="innerHTML"
                  style="cursor: pointer;"><%= card.name %></span>
          </li>
        <% }); %>
      </ul>
    </div>
  </div>
</div>

